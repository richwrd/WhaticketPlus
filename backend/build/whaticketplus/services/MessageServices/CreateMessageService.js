const a556_0x546943=a556_0x5484;(function(_0x28c898,_0x18280c){const _0x571880=a556_0x5484,_0x53152b=_0x28c898();while(!![]){try{const _0x1c9a31=-parseInt(_0x571880(0x1eb))/0x1*(parseInt(_0x571880(0x29e))/0x2)+parseInt(_0x571880(0x2cc))/0x3*(parseInt(_0x571880(0x1f1))/0x4)+parseInt(_0x571880(0x1f5))/0x5+-parseInt(_0x571880(0x21a))/0x6*(parseInt(_0x571880(0x295))/0x7)+-parseInt(_0x571880(0x24c))/0x8+parseInt(_0x571880(0x1fc))/0x9+parseInt(_0x571880(0x2aa))/0xa*(parseInt(_0x571880(0x22e))/0xb);if(_0x1c9a31===_0x18280c)break;else _0x53152b['push'](_0x53152b['shift']());}catch(_0x1f3b96){_0x53152b['push'](_0x53152b['shift']());}}}(a556_0x28fc,0x7be40));const a556_0x127e60=(function(){const _0x379096=a556_0x5484,_0x5493ba={};_0x5493ba[_0x379096(0x2a9)]=function(_0x1f00f5,_0x10f347){return _0x1f00f5===_0x10f347;},_0x5493ba[_0x379096(0x28d)]=_0x379096(0x26c);const _0x553f66=_0x5493ba;let _0x447c4b=!![];return function(_0x547038,_0x4611f6){const _0x5aab23=_0x447c4b?function(){const _0x161693=a556_0x5484;if(_0x4611f6){if(_0x553f66[_0x161693(0x2a9)](_0x553f66['tcZsk'],_0x553f66[_0x161693(0x28d)])){const _0x2e9098=_0x4611f6[_0x161693(0x284)](_0x547038,arguments);return _0x4611f6=null,_0x2e9098;}else{if(_0x7853c2)return _0x1514b7;else _0x4be667(0x0);}}}:function(){};return _0x447c4b=![],_0x5aab23;};}()),a556_0xdd4f5a=a556_0x127e60(this,function(){const _0x178b0b=a556_0x5484,_0x3f9a64={};_0x3f9a64['zRkja']=_0x178b0b(0x1f2);const _0x6ba5c8=_0x3f9a64;return a556_0xdd4f5a[_0x178b0b(0x25c)]()['search'](_0x6ba5c8[_0x178b0b(0x213)])[_0x178b0b(0x25c)]()[_0x178b0b(0x2bc)](a556_0xdd4f5a)[_0x178b0b(0x28f)](_0x178b0b(0x1f2));});a556_0xdd4f5a();const a556_0x1e85df=(function(){const _0xf09f1f=a556_0x5484,_0x441805={};_0x441805[_0xf09f1f(0x1f3)]='VyKct',_0x441805[_0xf09f1f(0x297)]=_0xf09f1f(0x255);const _0x549c27=_0x441805;let _0x373c25=!![];return function(_0x182f72,_0x561923){if(_0x549c27['SohyO']===_0x549c27['SohyO']){const _0xdc4b14=_0x373c25?function(){const _0x4c50b2=a556_0x5484;if(_0x561923){if(_0x549c27[_0x4c50b2(0x1f3)]===_0x4c50b2(0x274)){const _0x5174c3=_0x561923[_0x4c50b2(0x284)](_0x182f72,arguments);return _0x561923=null,_0x5174c3;}else{if(_0x503f17){const _0x3bf9a8=_0x3773ba[_0x4c50b2(0x284)](_0x2b81b4,arguments);return _0x19ddbd=null,_0x3bf9a8;}}}}:function(){};return _0x373c25=![],_0xdc4b14;}else{const _0x2a893a=_0x18dd83?function(){const _0x20531e=a556_0x5484;if(_0x3664cb){const _0x2e9721=_0x175318[_0x20531e(0x284)](_0x3ce54f,arguments);return _0x46b1aa=null,_0x2e9721;}}:function(){};return _0x1c8428=![],_0x2a893a;}};}());(function(){const _0x5c3c75=a556_0x5484,_0x3a1230={'ALEUI':_0x5c3c75(0x29c),'glgLL':_0x5c3c75(0x26a),'QSCMk':function(_0x5378c5,_0x34b387){return _0x5378c5(_0x34b387);},'eQrZk':'init','ACPhL':function(_0x1f967c,_0x9bcc6b){return _0x1f967c+_0x9bcc6b;},'kKwdI':'chain','Xwfwe':_0x5c3c75(0x207),'VsqwM':function(_0x750172,_0x543783){return _0x750172===_0x543783;},'SBsAC':_0x5c3c75(0x1ff),'Yqtzu':_0x5c3c75(0x256),'MgdwX':function(_0x434b36,_0xeb74a1,_0x582e00){return _0x434b36(_0xeb74a1,_0x582e00);}};_0x3a1230['MgdwX'](a556_0x1e85df,this,function(){const _0x2b15af=_0x5c3c75,_0x1eebce=new RegExp(_0x3a1230[_0x2b15af(0x2ac)]),_0x3cf3f3=new RegExp(_0x3a1230['glgLL'],'i'),_0x5f4ae1=_0x3a1230[_0x2b15af(0x294)](a556_0x399a38,_0x3a1230[_0x2b15af(0x218)]);if(!_0x1eebce[_0x2b15af(0x2c9)](_0x3a1230['ACPhL'](_0x5f4ae1,_0x3a1230[_0x2b15af(0x25a)]))||!_0x3cf3f3[_0x2b15af(0x2c9)](_0x3a1230['ACPhL'](_0x5f4ae1,_0x3a1230[_0x2b15af(0x217)])))_0x3a1230[_0x2b15af(0x294)](_0x5f4ae1,'0');else{if(_0x3a1230[_0x2b15af(0x248)](_0x3a1230['SBsAC'],_0x3a1230[_0x2b15af(0x1fd)])){const _0x449a69=_0xb0d473[_0x2b15af(0x233)]('\x0a'),_0x6520f2=_0x449a69[_0x2b15af(0x298)](_0x5b2e29=>{const _0x2fc565=_0x2b15af,_0xdc545c=_0x5b2e29[_0x2fc565(0x265)](/ðŸ“ž(\d+)/);if(_0xdc545c){const _0x480d7e=_0xdc545c[0x1],_0x979580=_0x28f39b[_0x480d7e]||'Sem\x20foto\x20de\x20perfil';return _0x5b2e29+_0x2fc565(0x264)+_0x979580;}return _0x5b2e29;});return _0x6520f2['join']('\x0a');}else a556_0x399a38();}})();}());const a556_0x4a0b72=(function(){let _0x4929a1=!![];return function(_0x320df2,_0x3bee67){const _0x54bec0=_0x4929a1?function(){if(_0x3bee67){const _0x3dd24c=_0x3bee67['apply'](_0x320df2,arguments);return _0x3bee67=null,_0x3dd24c;}}:function(){};return _0x4929a1=![],_0x54bec0;};}()),a556_0x40e330=a556_0x4a0b72(this,function(){const _0x97e374=a556_0x5484,_0x6ad893={'SQRUR':_0x97e374(0x26e),'odHgW':function(_0x12c117,_0x2e2c43){return _0x12c117!==_0x2e2c43;},'Nxkia':_0x97e374(0x2ca),'cmfMv':function(_0x1aa461,_0x379dc7){return _0x1aa461(_0x379dc7);},'RjhOt':function(_0x3ba11c,_0x512c01){return _0x3ba11c+_0x512c01;},'riCWg':function(_0x636fb8,_0x4ab84d){return _0x636fb8+_0x4ab84d;},'zlJsr':_0x97e374(0x29b),'qGzkR':_0x97e374(0x1ee),'qLjpK':function(_0xf27717,_0x35b08d){return _0xf27717!==_0x35b08d;},'blGhC':_0x97e374(0x2ce),'fYbbK':_0x97e374(0x24e),'wtCZB':_0x97e374(0x1f2),'Ribfc':_0x97e374(0x296),'JSKyr':_0x97e374(0x2c6),'Fsqrs':'info','Qnonx':_0x97e374(0x26d),'bpOkS':'exception','oSfMs':_0x97e374(0x240),'zCMdq':_0x97e374(0x21d),'ywCoQ':function(_0x1b4d97,_0x262abf){return _0x1b4d97<_0x262abf;},'DRHVZ':_0x97e374(0x2b1)},_0x216212=function(){const _0x479a9b=_0x97e374;if(_0x6ad893[_0x479a9b(0x20f)](_0x6ad893[_0x479a9b(0x2b3)],_0x6ad893[_0x479a9b(0x2b3)])){const _0x4b37f7={};return _0x4b37f7[_0x479a9b(0x27d)]=_0x2b12a6,_0x1ab435&&_0x3e808d['__esModule']?_0x5cca3e:_0x4b37f7;}else{let _0x29ce84;try{_0x29ce84=_0x6ad893[_0x479a9b(0x289)](Function,_0x6ad893[_0x479a9b(0x21c)](_0x6ad893[_0x479a9b(0x234)](_0x6ad893[_0x479a9b(0x249)],_0x6ad893[_0x479a9b(0x2bd)]),');'))();}catch(_0x489dbf){if(_0x6ad893['qLjpK'](_0x6ad893[_0x479a9b(0x23d)],_0x6ad893['fYbbK']))_0x29ce84=window;else{const _0x966fa3=_0x4bec86[0x1],_0x4db619=_0xda3632[_0x966fa3]||_0x6ad893[_0x479a9b(0x204)];return _0x505b86+_0x479a9b(0x264)+_0x4db619;}}return _0x29ce84;}},_0x5391b5=_0x216212(),_0x2ff7e7=_0x5391b5[_0x97e374(0x20d)]=_0x5391b5[_0x97e374(0x20d)]||{},_0x694f3c=[_0x6ad893[_0x97e374(0x206)],_0x6ad893[_0x97e374(0x252)],_0x6ad893[_0x97e374(0x208)],_0x6ad893[_0x97e374(0x279)],_0x6ad893['bpOkS'],_0x6ad893[_0x97e374(0x293)],_0x6ad893['zCMdq']];for(let _0x45901b=0x0;_0x6ad893['ywCoQ'](_0x45901b,_0x694f3c[_0x97e374(0x28e)]);_0x45901b++){if(_0x6ad893['odHgW'](_0x6ad893[_0x97e374(0x2ba)],_0x6ad893[_0x97e374(0x2ba)]))return _0x20c809[_0x97e374(0x25c)]()[_0x97e374(0x28f)](_0x6ad893[_0x97e374(0x237)])[_0x97e374(0x25c)]()['constructor'](_0x45526f)[_0x97e374(0x28f)](_0x6ad893[_0x97e374(0x237)]);else{const _0x43f65f=a556_0x4a0b72[_0x97e374(0x2bc)][_0x97e374(0x28b)][_0x97e374(0x24b)](a556_0x4a0b72),_0x4cbc27=_0x694f3c[_0x45901b],_0x16f90c=_0x2ff7e7[_0x4cbc27]||_0x43f65f;_0x43f65f[_0x97e374(0x1f7)]=a556_0x4a0b72['bind'](a556_0x4a0b72),_0x43f65f['toString']=_0x16f90c['toString']['bind'](_0x16f90c),_0x2ff7e7[_0x4cbc27]=_0x43f65f;}}});a556_0x40e330();'use strict';var __createBinding=this&&this[a556_0x546943(0x23c)]||(Object['create']?function(_0x19d32a,_0x257daf,_0x4fb998,_0x4035f3){const _0x347382=a556_0x546943,_0x565156={'Ypqln':'0|1|4|2|3','VKCMw':function(_0x34b3a1,_0x7e8b0d,_0x484a5a){return _0x34b3a1(_0x7e8b0d,_0x484a5a);},'ISPFI':function(_0x357574,_0x4f992b){return _0x357574!=_0x4f992b;},'xGAxv':function(_0x3d8105,_0x2e164c){return _0x3d8105!==_0x2e164c;},'vKuql':_0x347382(0x27d),'uPEqy':function(_0x104b82,_0x3df0a1){return _0x104b82===_0x3df0a1;},'nXPdV':function(_0x58b8fc,_0x5c39aa){return _0x58b8fc===_0x5c39aa;},'iGDjp':function(_0x5b8f61,_0x56538d){return _0x5b8f61 in _0x56538d;},'tXLIR':_0x347382(0x216),'TLEmQ':function(_0x296e3b,_0x1f1ab1){return _0x296e3b!==_0x1f1ab1;},'iYDEe':_0x347382(0x2c8),'dkffu':'AJazj'};if(_0x565156[_0x347382(0x27b)](_0x4035f3,undefined))_0x4035f3=_0x4fb998;var _0x3e76f2=Object[_0x347382(0x292)](_0x257daf,_0x4fb998);if(!_0x3e76f2||(_0x565156['iGDjp'](_0x565156[_0x347382(0x263)],_0x3e76f2)?!_0x257daf[_0x347382(0x2c2)]:_0x3e76f2[_0x347382(0x29f)]||_0x3e76f2[_0x347382(0x2b8)])){if(_0x565156[_0x347382(0x2c5)](_0x565156[_0x347382(0x257)],_0x565156[_0x347382(0x2b5)]))_0x3e76f2={'enumerable':!![],'get':function(){const _0x4ebbb9=_0x347382;if(_0x565156[_0x4ebbb9(0x271)](_0x4ebbb9(0x222),'VMBTz'))return _0x257daf[_0x4fb998];else{const _0xb02b2f=_0x565156['Ypqln'][_0x4ebbb9(0x233)]('|');let _0x473c06=0x0;while(!![]){switch(_0xb02b2f[_0x473c06++]){case'0':if(_0x2685bf&&_0x29368d[_0x4ebbb9(0x2c2)])return _0x10569a;continue;case'1':var _0x12fea3={};continue;case'2':_0x565156[_0x4ebbb9(0x211)](_0xd73fd6,_0x12fea3,_0x4c59f5);continue;case'3':return _0x12fea3;case'4':if(_0x565156['ISPFI'](_0x5d3d73,null)){for(var _0x486945 in _0x546368)if(_0x565156[_0x4ebbb9(0x250)](_0x486945,_0x565156[_0x4ebbb9(0x285)])&&_0x5b8cc4[_0x4ebbb9(0x28b)][_0x4ebbb9(0x282)]['call'](_0x5ae646,_0x486945))_0x21a628(_0x12fea3,_0x58c33e,_0x486945);}continue;}break;}}}};else{const _0x14345e=/ðŸ“ž(\d+)/g,_0x49b324=[];let _0x541575;while(_0x565156[_0x347382(0x250)](_0x541575=_0x14345e[_0x347382(0x260)](_0x1c5e39),null)){_0x49b324['push'](_0x541575[0x1]);}return _0x49b324;}}Object[_0x347382(0x2b0)](_0x19d32a,_0x4035f3,_0x3e76f2);}:function(_0x3bfe7a,_0x26c2aa,_0x3f04a2,_0x470439){const _0x45cbd3=a556_0x546943,_0x51dffa={};_0x51dffa[_0x45cbd3(0x2a7)]=function(_0x13615b,_0x1fb7d2){return _0x13615b===_0x1fb7d2;};const _0x3bcfa7=_0x51dffa;if(_0x3bcfa7[_0x45cbd3(0x2a7)](_0x470439,undefined))_0x470439=_0x3f04a2;_0x3bfe7a[_0x470439]=_0x26c2aa[_0x3f04a2];}),__setModuleDefault=this&&this[a556_0x546943(0x238)]||(Object[a556_0x546943(0x239)]?function(_0x234fa9,_0x40ed5b){const _0xbd4602=a556_0x546943,_0x2e6226={};_0x2e6226[_0xbd4602(0x1ef)]='default';const _0x43bb2a=_0x2e6226,_0x6307c9={};_0x6307c9[_0xbd4602(0x2ad)]=!![],_0x6307c9[_0xbd4602(0x2c1)]=_0x40ed5b,Object[_0xbd4602(0x2b0)](_0x234fa9,_0x43bb2a[_0xbd4602(0x1ef)],_0x6307c9);}:function(_0x14fac4,_0x512180){const _0x568735=a556_0x546943,_0x22e81d={};_0x22e81d[_0x568735(0x291)]='default';const _0x44b751=_0x22e81d;_0x14fac4[_0x44b751[_0x568735(0x291)]]=_0x512180;}),__importStar=this&&this[a556_0x546943(0x2bf)]||function(_0x930f14){const _0x5eeaa0=a556_0x546943,_0x60afd6={'vvomE':_0x5eeaa0(0x219),'wCUyq':function(_0x3e1009,_0x47a9c7,_0x166d8d){return _0x3e1009(_0x47a9c7,_0x166d8d);},'fRZmX':function(_0x2251d2,_0x3ce534){return _0x2251d2!=_0x3ce534;},'ajyjZ':function(_0x498788,_0x1242b1){return _0x498788!==_0x1242b1;},'Aklvf':'default','vRDEw':function(_0xaee64d,_0x107295,_0x13629f,_0x23557f){return _0xaee64d(_0x107295,_0x13629f,_0x23557f);}},_0x236201=_0x60afd6[_0x5eeaa0(0x2bb)][_0x5eeaa0(0x233)]('|');let _0x22166d=0x0;while(!![]){switch(_0x236201[_0x22166d++]){case'0':var _0x2561ea={};continue;case'1':_0x60afd6['wCUyq'](__setModuleDefault,_0x2561ea,_0x930f14);continue;case'2':return _0x2561ea;case'3':if(_0x60afd6['fRZmX'](_0x930f14,null)){for(var _0x480152 in _0x930f14)if(_0x60afd6['ajyjZ'](_0x480152,_0x60afd6['Aklvf'])&&Object[_0x5eeaa0(0x28b)][_0x5eeaa0(0x282)][_0x5eeaa0(0x200)](_0x930f14,_0x480152))_0x60afd6[_0x5eeaa0(0x270)](__createBinding,_0x2561ea,_0x930f14,_0x480152);}continue;case'4':if(_0x930f14&&_0x930f14[_0x5eeaa0(0x2c2)])return _0x930f14;continue;}break;}},__importDefault=this&&this[a556_0x546943(0x22f)]||function(_0x1e8900){return _0x1e8900&&_0x1e8900['__esModule']?_0x1e8900:{'default':_0x1e8900};};const a556_0x3efd08={};a556_0x3efd08['value']=!![],Object[a556_0x546943(0x2b0)](exports,'__esModule',a556_0x3efd08);const socket_1=require(a556_0x546943(0x1f0)),Message_1=__importDefault(require(a556_0x546943(0x26f))),Ticket_1=__importDefault(require('../../models/Ticket')),wbot_1=require(a556_0x546943(0x20b)),Contact_1=__importDefault(require(a556_0x546943(0x275))),CryptoJS=__importStar(require(a556_0x546943(0x1ec))),audioHandler_1=require('./audioHandler'),extractContactInfo=_0x77cdaa=>{const _0x2f64f5=a556_0x546943,_0x425c42={};_0x425c42[_0x2f64f5(0x2a5)]=function(_0x5a168e,_0x201a9e){return _0x5a168e!==_0x201a9e;};const _0x30a08c=_0x425c42,_0x5487cd=/(.+?): ðŸ“ž(\d+)/g,_0x19161d=[];let _0x25d43d;while(_0x30a08c[_0x2f64f5(0x2a5)](_0x25d43d=_0x5487cd[_0x2f64f5(0x260)](_0x77cdaa),null)){_0x19161d[_0x2f64f5(0x220)]({'name':_0x25d43d[0x1][_0x2f64f5(0x25f)](),'number':_0x25d43d[0x2]});}return _0x19161d;},extractPhoneNumbers=_0x378330=>{const _0x399347=a556_0x546943,_0x27d2f5={};_0x27d2f5[_0x399347(0x262)]=_0x399347(0x26e),_0x27d2f5[_0x399347(0x22c)]=function(_0xfcdf19,_0x2a0f85){return _0xfcdf19!==_0x2a0f85;},_0x27d2f5[_0x399347(0x27e)]=function(_0x56e4a6,_0x45dc11){return _0x56e4a6!==_0x45dc11;},_0x27d2f5[_0x399347(0x25d)]='JDmcq';const _0x6517f5=_0x27d2f5,_0x591a3d=/ðŸ“ž(\d+)/g,_0x47701c=[];let _0x280913;while(_0x6517f5['YlCOx'](_0x280913=_0x591a3d['exec'](_0x378330),null)){if(_0x6517f5['dBoqL'](_0x6517f5['LHzDj'],'FbAah'))_0x47701c['push'](_0x280913[0x1]);else{const _0x43cae6=_0xd6d296[_0x399347(0x265)](/ðŸ“ž(\d+)/);if(_0x43cae6){const _0xc091be=_0x43cae6[0x1],_0x1cb432=_0x2d5c1f[_0xc091be]||_0x6517f5[_0x399347(0x262)];return _0x193c4c+_0x399347(0x264)+_0x1cb432;}return _0x3497b8;}}return _0x47701c;},fetchProfilePictures=async(_0x2d4162,_0x3c00d4)=>{const _0x270e6b=a556_0x546943,_0x170077={'VUcXD':function(_0xe8b5b7,_0x17b6b4){return _0xe8b5b7(_0x17b6b4);},'Wsrmy':function(_0x46e450,_0x4b2da3){return _0x46e450+_0x4b2da3;},'oPcKJ':_0x270e6b(0x29b),'SWNpa':_0x270e6b(0x1ee),'VBtvH':function(_0x30cf19,_0x419826){return _0x30cf19!==_0x419826;},'iXzMU':_0x270e6b(0x23f),'ursbk':_0x270e6b(0x278),'lowGn':function(_0x517512,_0x5344fd){return _0x517512===_0x5344fd;},'TxbTu':'SvEVX','LBulE':'GjYGl'},_0x5c0d13={};for(const _0x2e9da7 of _0x2d4162){try{if(_0x170077[_0x270e6b(0x224)]('QSNNY',_0x170077[_0x270e6b(0x221)])){if(_0x1f25ec){const _0x620e5e=_0x10e860['apply'](_0x529f41,arguments);return _0xa9680b=null,_0x620e5e;}}else{const _0x26ee3f=_0x170077[_0x270e6b(0x214)](_0x2e9da7,_0x170077[_0x270e6b(0x287)]),_0x2f7938=await _0x3c00d4[_0x270e6b(0x276)](_0x26ee3f);_0x5c0d13[_0x2e9da7]=_0x2f7938;}}catch(_0x17c064){_0x170077[_0x270e6b(0x1fa)](_0x170077[_0x270e6b(0x259)],_0x170077[_0x270e6b(0x202)])?_0x2dd397=PbWnjZ['VUcXD'](_0xad9356,PbWnjZ['Wsrmy'](PbWnjZ['oPcKJ']+PbWnjZ[_0x270e6b(0x215)],');'))():_0x5c0d13[_0x2e9da7]=null;}}return _0x5c0d13;},formatMessageWithProfileUrls=(_0x1d5aee,_0x4467fc)=>{const _0x28ed33=a556_0x546943,_0x23fba5={};_0x23fba5['JYqHa']=_0x28ed33(0x26e);const _0x24562e=_0x23fba5,_0x391db4=_0x1d5aee[_0x28ed33(0x233)]('\x0a'),_0x5a62b0=_0x391db4[_0x28ed33(0x298)](_0x4091e9=>{const _0x4f2ec2=_0x28ed33,_0x33cc76=_0x4091e9['match'](/ðŸ“ž(\d+)/);if(_0x33cc76){const _0x423fd6=_0x33cc76[0x1],_0x207a34=_0x4467fc[_0x423fd6]||_0x24562e[_0x4f2ec2(0x2ae)];return _0x4091e9+'\x20URL\x20da\x20Foto:\x20'+_0x207a34;}return _0x4091e9;});return _0x5a62b0[_0x28ed33(0x1f9)]('\x0a');},updateOrCreateContact=async(_0x54c382,_0x2647a5)=>{const _0x248372=a556_0x546943,_0x63fe33={};_0x63fe33['wbadB']=function(_0x3d9222,_0x1e0dff){return _0x3d9222===_0x1e0dff;},_0x63fe33[_0x248372(0x2b4)]=_0x248372(0x230),_0x63fe33[_0x248372(0x22d)]=_0x248372(0x2ab);const _0x353d8c=_0x63fe33,{name:_0x87b874,number:_0x5bd1b4,profilePicUrl:_0x7d6c77}=_0x54c382,_0x15d08f={};_0x15d08f[_0x248372(0x23b)]=_0x5bd1b4,_0x15d08f[_0x248372(0x2af)]=_0x2647a5;const _0x4088ce={};_0x4088ce[_0x248372(0x244)]=_0x15d08f;const _0x2d1e05=await Contact_1['default'][_0x248372(0x288)](_0x4088ce);if(_0x2d1e05){const _0x3917d4={};_0x3917d4[_0x248372(0x235)]=_0x87b874,_0x3917d4[_0x248372(0x203)]=_0x7d6c77,await _0x2d1e05['update'](_0x3917d4);}else{if(_0x353d8c['wbadB'](_0x353d8c[_0x248372(0x2b4)],_0x353d8c[_0x248372(0x22d)])){const _0x13b769=_0x4bb601[_0x248372(0x2bc)][_0x248372(0x28b)]['bind'](_0x315f74),_0x292688=_0x5a8452[_0x391ad3],_0x4aa9f2=_0x30cbc1[_0x292688]||_0x13b769;_0x13b769['__proto__']=_0x3fc4b3['bind'](_0x383afc),_0x13b769[_0x248372(0x25c)]=_0x4aa9f2[_0x248372(0x25c)]['bind'](_0x4aa9f2),_0x2e6f2d[_0x292688]=_0x13b769;}else{const _0x47940e={};_0x47940e['name']=_0x87b874,_0x47940e[_0x248372(0x23b)]=_0x5bd1b4,_0x47940e[_0x248372(0x203)]=_0x7d6c77,_0x47940e[_0x248372(0x2af)]=_0x2647a5,await Contact_1[_0x248372(0x27d)][_0x248372(0x239)](_0x47940e);}}},CreateMessageService=async({messageData:_0x234298,companyId:_0x1cf743})=>{const _0x5e72ad=a556_0x546943,_0x5a6c5d={'ydZCk':'counter','gdhkQ':function(_0x3dafa4,_0x3d60da){return _0x3dafa4!==_0x3d60da;},'WPfTj':_0x5e72ad(0x223),'rmFBP':_0x5e72ad(0x272),'QhJks':function(_0x1fdbdb,_0x5f4537){return _0x1fdbdb===_0x5f4537;},'PzTDD':_0x5e72ad(0x2c0),'BRema':function(_0x225ca7,_0x4553c4){return _0x225ca7===_0x4553c4;},'cFqsL':_0x5e72ad(0x27f),'yazvE':function(_0x2e12da,_0x6f0407){return _0x2e12da(_0x6f0407);},'fsSbX':'Uxhdn','TviGG':_0x5e72ad(0x24a),'VQCmy':function(_0x1abde6,_0x3007d7,_0xcf3bb3){return _0x1abde6(_0x3007d7,_0xcf3bb3);},'FdcLT':_0x5e72ad(0x1f6),'WVVpW':_0x5e72ad(0x27c),'ZluoY':'contact','zElsV':_0x5e72ad(0x29d),'qtxpF':_0x5e72ad(0x29a),'UxHmo':'ERR_CREATING_MESSAGE','xJeae':function(_0x282425,_0xa5562a){return _0x282425!==_0xa5562a;},'qeoGU':function(_0x5ee7ee,_0x4a3f15){return _0x5ee7ee===_0x4a3f15;},'pkJob':_0x5e72ad(0x239),'PWval':_0x5e72ad(0x2a4)};if(_0x5a6c5d[_0x5e72ad(0x227)](_0x234298[_0x5e72ad(0x299)],_0x5a6c5d[_0x5e72ad(0x2d2)])&&_0x234298[_0x5e72ad(0x23a)][_0x5e72ad(0x2a0)](_0x5e72ad(0x253))){if(_0x5a6c5d[_0x5e72ad(0x245)](_0x5a6c5d[_0x5e72ad(0x283)],_0x5a6c5d[_0x5e72ad(0x283)]))await(0x0,audioHandler_1['handleAudioMessage'])(_0x234298['id'],_0x234298['mediaUrl'],_0x1cf743);else{const _0x40eee3=_0x7f0b7f?function(){if(_0x3dee62){const _0x4f7de=_0x58a1f3['apply'](_0x237c63,arguments);return _0x3e22eb=null,_0x4f7de;}}:function(){};return _0x1ac083=![],_0x40eee3;}}const _0x28bb15=_0x5a6c5d[_0x5e72ad(0x1fe)](extractContactInfo,_0x234298[_0x5e72ad(0x2a2)]);if(_0x28bb15[_0x5e72ad(0x28e)]>0x0){const _0x3a5bcd=await Ticket_1[_0x5e72ad(0x27d)][_0x5e72ad(0x251)](_0x234298[_0x5e72ad(0x225)]),_0x1a1dcf=_0x3a5bcd?.[_0x5e72ad(0x2b9)];if(!_0x1a1dcf){if(_0x5a6c5d[_0x5e72ad(0x2d1)](_0x5a6c5d['fsSbX'],_0x5e72ad(0x277))){const _0xe5bfbf=_0x2a4ed9[_0x5e72ad(0x284)](_0x58777f,arguments);return _0x57930f=null,_0xe5bfbf;}else throw new Error(_0x5a6c5d[_0x5e72ad(0x232)]);}const _0x2ddb8e=(0x0,wbot_1[_0x5e72ad(0x201)])(_0x1a1dcf),_0x4fb918=await _0x5a6c5d[_0x5e72ad(0x2a8)](fetchProfilePictures,_0x28bb15[_0x5e72ad(0x298)](_0x2273f9=>_0x2273f9['number']),_0x2ddb8e);_0x234298[_0x5e72ad(0x2a2)]=_0x5a6c5d[_0x5e72ad(0x2a8)](formatMessageWithProfileUrls,_0x234298[_0x5e72ad(0x2a2)],_0x4fb918);const _0x52f4eb={..._0x234298};_0x52f4eb[_0x5e72ad(0x2af)]=_0x1cf743,await Message_1[_0x5e72ad(0x27d)][_0x5e72ad(0x22b)](_0x52f4eb);for(const _0x7963bf of _0x28bb15){if(_0x5a6c5d[_0x5e72ad(0x28c)]===_0x5a6c5d['WVVpW']){const _0x27b3dc=_0x123481[_0x5e72ad(0x284)](_0x4d63a3,arguments);return _0x2cb67f=null,_0x27b3dc;}else _0x7963bf[_0x5e72ad(0x203)]=_0x4fb918[_0x7963bf[_0x5e72ad(0x23b)]],await _0x5a6c5d['VQCmy'](updateOrCreateContact,_0x7963bf,_0x1cf743);}}else{const _0x5d84dc={..._0x234298};_0x5d84dc[_0x5e72ad(0x2af)]=_0x1cf743,await Message_1[_0x5e72ad(0x27d)][_0x5e72ad(0x22b)](_0x5d84dc);}const _0x141ccb=await Message_1[_0x5e72ad(0x27d)][_0x5e72ad(0x251)](_0x234298['id'],{'include':[_0x5a6c5d[_0x5e72ad(0x21f)],{'model':Ticket_1['default'],'as':_0x5a6c5d['zElsV'],'include':['contact',_0x5e72ad(0x258)]},{'model':Message_1[_0x5e72ad(0x27d)],'as':_0x5a6c5d[_0x5e72ad(0x21b)],'include':[_0x5a6c5d[_0x5e72ad(0x21f)]]}]});if(!_0x141ccb)throw new Error(_0x5a6c5d[_0x5e72ad(0x2a1)]);_0x5a6c5d['xJeae'](_0x141ccb?.[_0x5e72ad(0x29d)]['queueId'],null)&&_0x5a6c5d[_0x5e72ad(0x242)](_0x141ccb[_0x5e72ad(0x20a)],null)&&await _0x141ccb['update']({'queueId':_0x141ccb['ticket'][_0x5e72ad(0x20a)]});function _0x2ed337(_0x500128,_0x51e367){const _0xdece57=_0x5e72ad,_0x3e97e2={};_0x3e97e2['MQPJI']=_0x5a6c5d[_0xdece57(0x266)];const _0x361d1c=_0x3e97e2;return _0x5a6c5d[_0xdece57(0x2d1)](_0x5a6c5d[_0xdece57(0x254)],_0x5a6c5d[_0xdece57(0x226)])?CryptoJS[_0xdece57(0x280)][_0xdece57(0x23e)](JSON[_0xdece57(0x20c)](_0x500128),_0x51e367)[_0xdece57(0x25c)]():function(_0x35ba0d){}[_0xdece57(0x2bc)]('while\x20(true)\x20{}')[_0xdece57(0x284)](Rlpoud[_0xdece57(0x268)]);}const _0x519533=(0x0,socket_1[_0x5e72ad(0x231)])(),_0x4f76f7={};_0x4f76f7[_0x5e72ad(0x243)]=_0x5a6c5d[_0x5e72ad(0x205)],_0x4f76f7[_0x5e72ad(0x228)]=_0x141ccb,_0x4f76f7['ticket']=_0x141ccb[_0x5e72ad(0x29d)],_0x4f76f7['contact']=_0x141ccb[_0x5e72ad(0x29d)][_0x5e72ad(0x21e)];const _0x2a12ba=_0x4f76f7,_0x1ac40a=_0x5a6c5d[_0x5e72ad(0x2c3)],_0x23f2cf=_0x5a6c5d[_0x5e72ad(0x2a8)](_0x2ed337,_0x2a12ba,_0x1ac40a);return _0x519533['to'](_0x141ccb['ticketId'][_0x5e72ad(0x25c)]())['to'](_0x141ccb[_0x5e72ad(0x29d)][_0x5e72ad(0x24f)])['to'](_0x5e72ad(0x236))[_0x5e72ad(0x1f8)](_0x5e72ad(0x2cb)+_0x1cf743+_0x5e72ad(0x229),_0x23f2cf),_0x141ccb;};exports['default']=CreateMessageService;function a556_0x5484(_0x10aa29,_0x3c8dc5){const _0x10fcb5=a556_0x28fc();return a556_0x5484=function(_0x40e330,_0x4a0b72){_0x40e330=_0x40e330-0x1eb;let _0x4a2d8a=_0x10fcb5[_0x40e330];return _0x4a2d8a;},a556_0x5484(_0x10aa29,_0x3c8dc5);}function a556_0x399a38(_0x2ce9b4){const _0x42e474=a556_0x546943,_0x3b86be={'EQjCh':function(_0x444a30,_0x2a4a09){return _0x444a30(_0x2a4a09);},'cATPq':function(_0x2acdc1,_0x53a7ab){return _0x2acdc1+_0x53a7ab;},'yvpjE':function(_0x4b35be,_0x237305){return _0x4b35be+_0x237305;},'kgQoQ':_0x42e474(0x29b),'aAQkb':_0x42e474(0x1ee),'aoKOi':function(_0x4f71d2,_0x4193ab){return _0x4f71d2===_0x4193ab;},'Jqwuj':_0x42e474(0x209),'haPKx':_0x42e474(0x286),'OHEHY':function(_0x917ae,_0x5bebc0){return _0x917ae!==_0x5bebc0;},'IsHhL':_0x42e474(0x241),'WbAQX':function(_0x2499b3,_0x5cfd50){return _0x2499b3 in _0x5cfd50;},'NGEnY':_0x42e474(0x216),'FehfQ':function(_0x2186ff,_0x5e8225){return _0x2186ff===_0x5e8225;},'xZYSe':_0x42e474(0x2be),'sQCKo':_0x42e474(0x2b7),'UhRwO':_0x42e474(0x2cf),'OkpHH':function(_0x1502a2,_0x2da8dc){return _0x1502a2+_0x2da8dc;},'mQkgF':function(_0x572762,_0x2bfd24){return _0x572762/_0x2bfd24;},'KrkxH':_0x42e474(0x28e),'yTuuR':function(_0x53f59f,_0x44862a){return _0x53f59f===_0x44862a;},'mHmbx':_0x42e474(0x273),'lkcIT':_0x42e474(0x2cd),'fpNeo':_0x42e474(0x267),'gXCra':'action','RcHFn':_0x42e474(0x247),'BfVak':_0x42e474(0x2a6),'kkiyH':_0x42e474(0x25e),'SrErG':function(_0x23b8f9,_0x405200){return _0x23b8f9!==_0x405200;},'huUdu':_0x42e474(0x22a),'muZME':function(_0x2a33b6,_0x4f272b){return _0x2a33b6(_0x4f272b);}};function _0x7b1ad5(_0x1740ae){const _0x3ca607=_0x42e474,_0x3c1fbf={'cMdfa':function(_0x52f121,_0x2102cd){const _0xabf9=a556_0x5484;return _0x3b86be[_0xabf9(0x28a)](_0x52f121,_0x2102cd);},'LXtNS':_0x3b86be['NGEnY']};if(_0x3b86be[_0x3ca607(0x1fb)](typeof _0x1740ae,_0x3b86be['xZYSe']))return function(_0x2c6e06){}[_0x3ca607(0x2bc)](_0x3b86be[_0x3ca607(0x20e)])[_0x3ca607(0x284)](_0x3b86be[_0x3ca607(0x25b)]);else{if(_0x3b86be[_0x3ca607(0x2d0)](_0x3b86be[_0x3ca607(0x210)]('',_0x3b86be[_0x3ca607(0x2c4)](_0x1740ae,_0x1740ae))[_0x3b86be['KrkxH']],0x1)||_0x3b86be['yTuuR'](_0x1740ae%0x14,0x0)){if(_0x3b86be['mHmbx']!==_0x3b86be[_0x3ca607(0x26b)]){let _0x249dd;try{_0x249dd=_0x3b86be[_0x3ca607(0x2b6)](_0x1338ea,_0x3b86be[_0x3ca607(0x1f4)](_0x3b86be[_0x3ca607(0x246)](_0x3b86be['kgQoQ'],_0x3b86be['aAQkb']),');'))();}catch(_0x314225){_0x249dd=_0x1ad59c;}return _0x249dd;}else(function(){const _0x5103ad=_0x3ca607,_0x2a6a8e={'WMStN':function(_0x4b5d4f,_0x111369){return _0x4b5d4f(_0x111369);}};if(_0x3b86be[_0x5103ad(0x2b2)](_0x3b86be['Jqwuj'],_0x3b86be[_0x5103ad(0x281)]))_0x2a6a8e['WMStN'](_0x26cc78,0x0);else return!![];}[_0x3ca607(0x2bc)](_0x3b86be[_0x3ca607(0x1f4)](_0x3b86be[_0x3ca607(0x1ed)],_0x3b86be[_0x3ca607(0x269)]))[_0x3ca607(0x200)](_0x3b86be[_0x3ca607(0x261)]));}else{if(_0x3b86be[_0x3ca607(0x212)](_0x3b86be['RcHFn'],_0x3b86be[_0x3ca607(0x2a3)])){if(_0xc1eb8e===_0x5e023b)_0x5e72e6=_0x598a9a;var _0x466ac8=_0x352519[_0x3ca607(0x292)](_0x2c30c4,_0x3d71b0);if(!_0x466ac8||(_0x3c1fbf[_0x3ca607(0x290)](_0x3c1fbf['LXtNS'],_0x466ac8)?!_0x29d5b0[_0x3ca607(0x2c2)]:_0x466ac8[_0x3ca607(0x29f)]||_0x466ac8[_0x3ca607(0x2b8)])){const _0xb2476a={};_0xb2476a[_0x3ca607(0x2ad)]=!![],_0xb2476a['get']=function(){return _0x3c6651[_0x511a27];},_0x466ac8=_0xb2476a;}_0x4cd22b['defineProperty'](_0x27b955,_0x2dd384,_0x466ac8);}else(function(){const _0x3ca191=_0x3ca607;if(_0x3b86be['OHEHY'](_0x3ca191(0x27a),_0x3b86be[_0x3ca191(0x24d)]))return![];else{const _0x15e131={};_0x15e131['enumerable']=!![],_0x15e131[_0x3ca191(0x216)]=function(){return _0x292cbb[_0x5de043];},_0x3576a0=_0x15e131;}}['constructor'](_0x3b86be[_0x3ca607(0x1ed)]+_0x3ca607(0x267))[_0x3ca607(0x284)](_0x3b86be[_0x3ca607(0x2c7)]));}}_0x3b86be[_0x3ca607(0x2b6)](_0x7b1ad5,++_0x1740ae);}try{if(_0x2ce9b4)return _0x7b1ad5;else _0x3b86be['SrErG'](_0x3b86be['huUdu'],_0x42e474(0x22a))?_0x252932[_0x5d76c9]=null:_0x3b86be['muZME'](_0x7b1ad5,0x0);}catch(_0x566fcc){}}function a556_0x28fc(){const _0x227bcc=['qtxpF','RjhOt','trace','contact','ZluoY','push','iXzMU','VMBTz','ZinGO','VBtvH','ticketId','rmFBP','QhJks','message','-appMessage','tqcEC','upsert','YlCOx','nbnfY','1760TkTKon','__importDefault','TMyAG','getIO','TviGG','split','riCWg','name','notification','wtCZB','__setModuleDefault','create','mediaUrl','number','__createBinding','blGhC','encrypt','QSNNY','table','XQwaX','qeoGU','action','where','BRema','yvpjE','Uctzh','VsqwM','zlJsr','WhatsApp\x20ID\x20nÃ£o\x20encontrado\x20para\x20o\x20ticket.','bind','6359152MWkObQ','IsHhL','aSEYs','status','xGAxv','findByPk','JSKyr','.ogg','WPfTj','iZJRm','KQOqf','iYDEe','queue','TxbTu','kKwdI','UhRwO','toString','LHzDj','stateObject','trim','exec','gXCra','vOArq','tXLIR','\x20URL\x20da\x20Foto:\x20','match','ydZCk','gger','MQPJI','fpNeo','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','mHmbx','iHVjd','error','Sem\x20foto\x20de\x20perfil','../../models/Message','vRDEw','uPEqy','qduOb','GLFQw','VyKct','../../models/Contact','profilePictureUrl','Uxhdn','@s.whatsapp.net','Qnonx','AMunL','nXPdV','nePoQ','default','dBoqL','AwVPP','AES','haPKx','hasOwnProperty','cFqsL','apply','vKuql','bxLXk','ursbk','findOne','cmfMv','WbAQX','prototype','FdcLT','tcZsk','length','search','cMdfa','pVzLm','getOwnPropertyDescriptor','oSfMs','QSCMk','4612209MCtXnp','log','SohyO','map','mediaType','quotedMsg','return\x20(function()\x20','function\x20*\x5c(\x20*\x5c)','ticket','2cTyuKr','writable','endsWith','UxHmo','body','BfVak','c40fd4b3600b522700186dc3778725fdb25cb0e36d93a37f56cfc2981db2a2c2','FGmsN','cehxV','sQeek','VQCmy','UfEFz','32120WaonHd','gvfzJ','ALEUI','enumerable','JYqHa','companyId','defineProperty','JCdQv','aoKOi','Nxkia','WkXAe','dkffu','EQjCh','while\x20(true)\x20{}','configurable','whatsappId','DRHVZ','vvomE','constructor','qGzkR','string','__importStar','audio','value','__esModule','PWval','mQkgF','TLEmQ','warn','kkiyH','sPKVX','test','qiEEe','company-','33YEOAgQ','debu','GUjCR','counter','OHEHY','gdhkQ','PzTDD','995953XXbmrW','crypto-js','lkcIT','{}.constructor(\x22return\x20this\x22)(\x20)','vvkVY','../../libs/socket','297732mKhWbi','(((.+)+)+)+$','MDQNo','cATPq','4691910hoYopd','iPdvk','__proto__','emit','join','lowGn','FehfQ','6175125XtwcCm','Yqtzu','yazvE','vsFHu','call','getWbot','LBulE','profilePicUrl','SQRUR','pkJob','Ribfc','input','Fsqrs','doUSY','queueId','../../libs/wbot','stringify','console','sQCKo','odHgW','OkpHH','VKCMw','yTuuR','zRkja','Wsrmy','SWNpa','get','Xwfwe','eQrZk','4|0|3|1|2','6HfCYnU'];a556_0x28fc=function(){return _0x227bcc;};return a556_0x28fc();}